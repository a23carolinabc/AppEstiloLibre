@using Microsoft.AspNetCore.Components.Authorization

<link href="css/Shared/MenuSuperiorAdmin.css" rel="stylesheet" />

<MudAppBar Elevation="0" Dense="false" Color="Color.Secondary" Class="appbar-admin">
    <MudText Typo="Typo.h6" Class="ml-3">@Traductor["lblPanelAdministracion"]</MudText>
    
    <MudSpacer />

    <!-- Información del usuario admin -->
    <AuthorizeView>
        <Authorized>
            <MudChip T="string" Icon="@Icons.Material.Filled.AdminPanelSettings" 
                     Color="Color.Primary" 
                     Size="Size.Medium"
                     Class="mr-2">
                @context.User.Identity?.Name
            </MudChip>
        </Authorized>
    </AuthorizeView>

    <!-- DISPOSITIVOS PEQUEÑOS -->
    <MudHidden Breakpoint="Breakpoint.MdAndUp">
        <MudMenu Dense
                 Variant="Variant.Text"
                 Size="Size.Medium"
                 Color="Color.Primary"
                 Icon="@Icons.Material.Filled.MoreVert">

            <MudMenuItem ForceLoad
                         Icon="@Icons.Material.TwoTone.Logout"
                         IconColor="Color.Error"
                         OnClick="LogOut">
                @Traductor["btnCerrarSesion"]
            </MudMenuItem>
        </MudMenu>
    </MudHidden>

    <!-- DISPOSITIVOS GRANDES-->
    <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudMenu Dense
                 Variant="Variant.Text"
                 Size="Size.Medium"
                 Color="Color.Surface"
                 Icon="@Icons.Material.TwoTone.AccountCircle">
            <MudMenuItem ForceLoad
                         Icon="@Icons.Material.TwoTone.Logout"
                         IconColor="Color.Error"
                         OnClick="LogOut">
                @Traductor["btnCerrarSesion"]
            </MudMenuItem>
        </MudMenu>
    </MudHidden>
</MudAppBar>

@code {
    #region ***** INYECCIONES *****
    [Inject]
    public required IStringLocalizer<TrShared> Traductor { get; set; }
    
    [Inject]
    public required ServicioLogIn ServicioLogIn { get; set; }

    #endregion

    #region ***** PARÁMETROS *****
    #endregion

    #region ***** PROPIEDADES PRIVADAS *****
    #endregion

    #region ***** MÉTODOS PÚBLICOS *****
    #endregion

    #region ***** MÉTODOS PRIVADOS *****

    private void LogOut()
    {
        this.ServicioLogIn.LogOut();
    }

    #endregion
}
