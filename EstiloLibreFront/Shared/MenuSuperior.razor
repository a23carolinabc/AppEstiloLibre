<link href="css/Shared/MenuSuperior.css" rel="stylesheet" />

<MudAppBar Elevation="0" Dense="false" Color="Color.Primary" Class="appbar-principal">
    <MudIconButton Icon="@Icons.Material.Filled.Menu"
                   Color="Color.Tertiary"
                   Edge="Edge.Start"
                   OnClick="@this.AlternarDrawer"
                   Class="d-flex d-md-none" />
    
    <!-- Información del usuario admin -->
    <MudChip T="string"
             Icon="@Icons.Material.Filled.AdminPanelSettings"
             Color="Color.Tertiary"
             Size="Size.Medium"
             Variant="Variant.Outlined"
             Class="mr-2">
        @this.ServicioDatosContexto.GetLoginUsuario()
    </MudChip>
    <MudSpacer />

    <!-- DISPOSITIVOS PEQUEÑOS -->
    <MudHidden Breakpoint="Breakpoint.MdAndUp">
        <MudMenu Dense
                 Variant="Variant.Text"
                 Size="Size.Medium"
                 Color="Color.Tertiary"
                 Icon="@Icons.Material.Filled.MoreVert">

            <MudMenuItem Href="@(URLsPantallas.Configuracion)"
                         Icon="@Icons.Material.TwoTone.SettingsApplications"
                         IconColor="Color.Primary"
                         Label=@Traductor["lblAjustes"] />

            <MudDivider />

            <MudMenuItem ForceLoad
                         Icon="@Icons.Material.TwoTone.Logout"
                         IconColor="Color.Primary"
                         Label=@Traductor["lblCerrarSesion"]
                         OnClick="LogOut" />
        </MudMenu>
    </MudHidden>

    <!-- DISPOSITIVOS GRANDES-->
    <MudHidden Breakpoint="Breakpoint.SmAndDown">
        <MudMenu Dense
                 Variant="Variant.Text"
                 Size="Size.Medium"
                 Color="Color.Tertiary"
                 Icon="@Icons.Material.TwoTone.MoreVert">

            <MudMenuItem Href="@(URLsPantallas.Configuracion)"
                         Icon="@Icons.Material.TwoTone.SettingsApplications"
                         IconColor="Color.Primary"
                         Label=@Traductor["lblAjustes"] />

            <MudDivider />

            <MudMenuItem ForceLoad
                         Icon="@Icons.Material.TwoTone.Logout"
                         IconColor="Color.Primary"
                         Label=@Traductor["lblCerrarSesion"]
                         OnClick="LogOut" />
        </MudMenu>
    </MudHidden>
</MudAppBar>

@code {
    #region ***** DEPENDENCIAS *****
    [Inject]
    public ServicioLogIn ServicioLogIn { get; set; }
    [Inject]
    public required IStringLocalizer<TrShared> Traductor { get; set; }
    [Inject]
    public required ServicioDatosContexto ServicioDatosContexto { get; set; }
    #endregion

    #region ***** PARÁMETROS *****
    [CascadingParameter]
    public LayoutAdministracion? Layout { get; set; }
    #endregion

    #region ***** PROPIEDADES PRIVADAS *****
    private string _strBusqueda = string.Empty;
    #endregion

    #region ***** MÉTODOS PÚBLICOS *****

    #endregion

    #region ***** MÉTODOS PRIVADOS *****
    private void LogOut()
    {
        this.ServicioLogIn.LogOut();
    }

    private void AlternarDrawer()
    {
        this.Layout?.MenuLateral?.AlternarDrawer();
    }
    #endregion
}